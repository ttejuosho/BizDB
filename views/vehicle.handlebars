{{!-- views/vehicle.handlebars --}}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Vehicle Details</title>

    <style>
      .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
      .card-soft { border-radius: 12px; border: 1px solid rgba(0,0,0,.08); box-shadow: 0 2px 10px rgba(0,0,0,.04); }
      .thumb { border-radius: 12px; overflow: hidden; border: 1px solid rgba(0,0,0,.08); background: #f8f9fa; }
      .kv { display:grid; grid-template-columns: 1fr 1fr; gap: 10px 16px; }
      @media (max-width: 768px) { .kv { grid-template-columns: 1fr; } }
      .kv-item { padding: 10px; border: 1px solid rgba(0,0,0,.06); border-radius: 10px; background: #fff; }
      .kv-label { font-size: 12px; color:#6c757d; text-transform: uppercase; letter-spacing: .02em; margin-bottom: 2px; }
      .kv-value { font-size: 14px; font-weight: 600; word-break: break-word; }
      .skeleton { background: linear-gradient(90deg, #eee, #f6f6f6, #eee); background-size: 200% 100%; animation: sk 1.3s infinite; border-radius: 8px; }
      @keyframes sk { 0% { background-position: 200% 0 } 100% { background-position: -200% 0 } }
      .divider { height:1px; background: rgba(0,0,0,.06); margin: 12px 0; }
    </style>
  </head>

  <body>
    <main class="container my-4">
      <div class="d-flex justify-content-between align-items-start mb-3">
        <div>
          <h2 class="mb-1">Vehicle Details</h2>
        </div>
        <div>
          <a class="btn btn-outline-secondary btn-sm" href="/autos">Back to Search</a>
        </div>
      </div>

      <div id="vehicleError" class="alert alert-danger" hidden></div>

      {{!-- VEHICLE CARD --}}
      <div class="card card-soft mb-3">
        <div class="card-body">
          <div class="row">
            <div class="col-12 col-md-4 mb-3">
              <div id="vehicleImage" class="thumb d-flex align-items-center justify-content-center" style="height:220px;">
                <div class="skeleton" style="width:100%;height:100%;"></div>
              </div>
              <div class="mt-2 small text-muted" id="vehicleLocationLine" aria-live="polite">
                Loading location…
              </div>

              <div class="mt-2" id="vehicleBadges"></div>
            </div>

            <div class="col-12 col-md-8">
              <div class="d-flex justify-content-between align-items-start">
                <div style="min-width: 0;">
                  <h4 id="vehicleTitle" class="mb-1 skeleton" style="height:22px; width:70%;"></h4>
                  <div class="text-muted small">
                    VIN: <span class="mono" id="vehicleVin">—</span>
                    <button class="btn btn-link btn-sm px-2" id="copyVinBtn" type="button">Copy</button>
                  </div>
                  <div class="text-muted small">
                    Country of Mfg: <span class="mono" id="vehicleCountry">—</span>
                  </div>
                </div>
                <div id="vehicleActions"></div>
              </div>

              <div class="divider"></div>

              <div class="mt-2 kv" id="vehicleKv"></div>
            </div>
          </div>
        </div>
      </div>

      {{!-- PRIMARY LOT / OUTCOME --}}
      <div class="card card-soft mb-3">
        <div class="card-header bg-white d-flex justify-content-between align-items-center">
          <strong>Primary Lot</strong>
          <div class="text-muted small">
            Lot: <span class="mono" id="primaryLotNumber">—</span>
          </div>
        </div>
        <div class="card-body">
          <div class="kv" id="primaryLotKv"></div>
        </div>
      </div>

      {{!-- SALE HISTORY --}}
      <div class="card card-soft">
        <div class="card-header bg-white d-flex justify-content-between align-items-center">
          <strong>Sale History</strong>
          <div class="text-muted small" id="saleCount">—</div>
        </div>
        <div class="card-body">
          <div id="saleHistory"></div>
        </div>
      </div>
    </main>

    <script>window.__VEHICLE_ID__ = "{{vehicleId}}";</script>
    <script type="text/javascript" src="/assets/js/vehicle.js"></script>
  </body>
</html>
